{"version":3,"sources":["components/movie-item/movie-item.jsx","utils/api.js","components/movie-tabs/movie-tabs.jsx","components/favorite/favorite-movies.jsx","components/sort-button/sort-button.jsx","components/top-button/top-button.jsx","components/loader/loader.jsx","components/pagination/pagination.jsx","components/search-panel/search-panel.jsx","components/nothing-search/nothing-search.jsx","components/error-message/error-message.js","components/App.jsx","index.js"],"names":["MovieItem","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","trimOverview","str","maxlength","length","concat","slice","split","join","getMovieImage","movie","image","backdrop_path","poster_path","handleClickRemove","setState","favorite","removeFromFavorite","handleClickAdd","addToFavorite","state","_this$props","removeMovie","react_default","a","createElement","className","src","alt","title","vote_average","overview","type","onClick","bind","Component","API_URL","API_KEY_3","MovieTabs","_ref","sort_by","updateSortBy","handleClick","value","getClassLink","isActiveClass","cn","active","FavoriteMovies","favoriteMovies","map","key","id","SortButton","handleSortByRate","rateUp","sortByRate","handleSortByReverseRate","sortByReverseRate","TopButton","scrollTop","Loader","role","randomstring","require","Pagination","page","totalPages","changePage","pagination__button--active","pageButtons","targetPage","Array","fill","index","creatButtons","disabled","generate","SearchPanel","updateSearch","_useState","useState","_useState2","slicedToArray","searchText","setSearchText","updateSearchWithDebounce","useCallback","debounce","placeholder","onChange","_ref2","target","NotFoundMovie","ErrorMessage","App","getMoviesFromServer","fetch","then","response","json","data","movies","results","isLoading","isError","total_pages","catch","updateMovies","filter","item","updateFavoriteMovies","toConsumableArray","prevState","sort","b","myRef","current","scrollIntoView","behavior","block","searchMovie","toLowerCase","includes","trim","React","createRef","prevProps","_this2","_this$state","visibleMovies","errorMessage","error_message_error_message","loading","loader","ref","search_panel","movie_tabs_MovieTabs","sort_button_sort_button","pagination_pagination","nothing_search_NotFoundMovie","movie_item_movie_item","favorite_movies_FavoriteMovies","top_button_top_button","ReactDOM","render","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.0579e1cf.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './movie-item.scss';\n\nclass MovieItem extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      favorite: false\n    };\n  }\n\n  trimOverview = (str, maxlength) => {\n    if (str.length > maxlength) {\n      return `${str.slice(0, maxlength).split('.').slice(0, -1).join('.')}.`;\n    }\n    return str;\n  }\n\n  getMovieImage = movie => {\n    const image = `https://image.tmdb.org/t/p/w500${movie.backdrop_path || movie.poster_path}`;\n    const noImage = 'https://stockpictures.io/wp-content/uploads/2020/01/image-not-found-big-768x432.png';\n    const isImage = movie.backdrop_path || movie.poster_path;\n\n    return isImage ? image : noImage;\n  }\n\n  handleClickRemove = (movie) => {\n    return () => {\n      this.setState({\n        favorite: false\n      });\n      this.props.removeFromFavorite(movie);\n    };\n  }\n\n  handleClickAdd = (movie) => {\n    return () => {\n      this.setState({\n        favorite: true\n      });\n      this.props.addToFavorite(movie);\n    };\n  }\n \n  render() {\n    const { movie, removeMovie } = this.props;\n    const { favorite } = this.state;\n    \n    return (\n      <div className=\"card\">\n        <img\n          className=\"card-img-top\"\n          src={this.getMovieImage(movie)}\n          alt=\"movie poster\" />\n        <div className=\"card-body\">\n          <h6 className=\"card-title\">{movie.title}</h6>\n          <p className=\"card-rate mb-4\">Rating: {movie.vote_average}</p>\n          <p className=\"card-overview\">\n            {this.trimOverview(movie.overview, 680)}\n          </p>\n          <div className=\"card-buttons d-flex flex-column align-items-end\">\n            {favorite ? (\n              <button \n                type=\"button\" \n                className=\"btn btn-secondary mb-2\" \n                onClick={this.handleClickRemove(movie)}\n              >\n                Remove Favorite\n              </button>\n            ) : (\n              <button \n                type=\"button\" \n                className=\"btn btn-success mb-2\" \n                onClick={this.handleClickAdd(movie)}\n              >\n                Add to Favorites\n              </button>\n            )}\n            <button \n              className=\"btn btn-danger\" \n              onClick={removeMovie.bind(null, movie)}\n            >\n              Delete movie\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n};\n\nMovieItem.propTypes = {\n  movie: PropTypes.object.isRequired,\n  removeMovie: PropTypes.func.isRequired,\n  addToFavorite: PropTypes.func.isRequired,\n  removeFromFavorite: PropTypes.func.isRequired\n};\n\nexport default MovieItem;","export const API_URL = \"https://api.themoviedb.org/3\";\n\nexport const API_KEY_3 = \"3f4ca4f3a9750da53450646ced312397\";\n\nexport const API_KEY_4 =\n  \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzZjRjYTRmM2E5NzUwZGE1MzQ1MDY0NmNlZDMxMjM5NyIsInN1YiI6IjVhYzlmNWRkOTI1MTQxNjJhZTA1Njk0NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Fc4f9DVB6pFWh6hIjYe0NCC4pImdmNzDIfi_3Nb3tC4\";\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\n\nimport './movie-tabs.scss';\n\nexport const MovieTabs = ({ sort_by, updateSortBy }) => {\n  const handleClick = value => {\n    return () => updateSortBy(value)\n  };\n\n  const getClassLink = value => {\n    const isActiveClass = sort_by === value;\n    \n    return cn('btn btn-info', {'active': isActiveClass});\n  }\n\n  return (\n    <ul className=\"tabs nav nav-pills\">\n      <li className=\"nav-item m-1\">\n        <button \n          className={getClassLink(\"popularity.desc\")}\n          onClick={handleClick(\"popularity.desc\")}\n        >\n        Popularity\n        </button>\n      </li>\n      <li className=\"nav-item m-1\">\n        <button \n          className={getClassLink(\"revenue.desc\")}\n          onClick={handleClick(\"revenue.desc\")}\n        >\n        Revenue\n        </button>\n      </li>\n      <li className=\"nav-item m-1\">\n        <button \n          className={getClassLink(\"vote_average.desc\")}\n          onClick={handleClick(\"vote_average.desc\")}\n        >\n          Vote average\n        </button>\n      </li>\n    </ul>\n  );\n};\n\nMovieTabs.propTypes = {\n  sort_by: PropTypes.string.isRequired,\n  updateSortBy: PropTypes.func.isRequired\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './favorite.scss';\n\nexport const FavoriteMovies = ({ favoriteMovies }) => {\n\n  return (\n    <div className=\"col-3 favorite\">\n      <h3>Favorites: <br/> {favoriteMovies.length} movies</h3>\n      <ul className=\"list-group\">\n        {favoriteMovies.map(movie => {\n          return (\n            <li className=\"list-group-item\" key={movie.id}>\n              <div className=\"d-flex justify-content-between\">\n                <div>{movie.title}</div>\n                <div>{movie.vote_average}</div>\n              </div>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nFavoriteMovies.propTypes = {\n  favoriteMovies: PropTypes.arrayOf(\n    PropTypes.object\n  ).isRequired,\n};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './sort-button.scss';\n\nclass SortButton extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      rateUp: true\n    };\n  }\n\n  handleSortByRate = () => {\n    return () => {\n      this.setState({\n        rateUp: false\n      });\n      this.props.sortByRate();\n    };\n  }\n\n  handleSortByReverseRate = () => {\n    return () => {\n      this.setState({\n        rateUp: true\n      });\n      this.props.sortByReverseRate();\n    };\n  }\n\n  render() {\n    const { rateUp } = this.state;\n\n    return (\n      <div className=\"col align-self-center text-right\">\n        {rateUp ? (\n          <button \n            type=\"button\"\n            title=\"Sort by Rate Up\"\n            className=\"btn btn-secondary sort-button\" \n            onClick={this.handleSortByRate()}\n          >\n            &uArr;\n          </button>\n          ) : (\n          <button \n            type=\"button\"\n            title=\"Sort by Rate Down\"\n            className=\"btn btn-secondary sort-button\" \n            onClick={this.handleSortByReverseRate()}\n          >\n            &dArr;\n          </button>\n        )}\n      </div>     \n    );\n  };\n};\n\nSortButton.propTypes = {\n  sortByRate: PropTypes.func.isRequired,\n  sortByReverseRate: PropTypes.func.isRequired\n};\n\nexport default SortButton;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './top-button.scss';\n\nconst TopButton = ({ scrollTop }) => (\n  <button \n    type=\"button\" \n    className=\"button__top\" \n    onClick={() => scrollTop()}\n    title=\"Go to top\"\n  >\n    Top\n  </button>\n);\n\nTopButton.propTypes = {\n  scrollTop: PropTypes.func.isRequired\n};\n\nexport default TopButton;","import React from 'react';\n\nconst Loader = () => {\n  return (\n    <div className=\"loader spinner-border text-primary\" role=\"status\">\n      <span className=\"sr-only\">Loading...</span>\n    </div>\n  );\n};\n\nexport default Loader;","import React from 'react';\nimport cn from 'classnames';\nimport PropTypes from 'prop-types';\n\nimport './pagination.scss';\n\nconst randomstring = require('randomstring');\nconst separate = \"...\";\nconst maxShowPage = 5;\n\nconst creatButtons = (targetPage, totalPages) => {\n  if (totalPages < 6) {\n    return new Array(totalPages).fill('').map((value, index) => index + 1);\n  }\n\n  if (targetPage <= maxShowPage) {\n    return [1, 2, 3, 4, 5, separate, totalPages];\n  }\n  \n  if (targetPage >= maxShowPage && targetPage <= totalPages - maxShowPage) {\n    return [1, separate, targetPage -1, targetPage, targetPage + 1, separate, totalPages];\n  }\n  \n  return [1, separate, totalPages - 4, totalPages - 3, totalPages - 2, totalPages - 1, totalPages];\n};\n\nconst Pagination = ({ page, totalPages, changePage }) => {\n\n  const getClassLink = value => {\n    const isActiveClass = page === value;\n    \n    return cn('pagination__button', {'pagination__button--active': isActiveClass});\n  }\n\n  const pageButtons = creatButtons(page, totalPages);\n  \n  return (\n    <div className=\"pagination\">\n      <button\n        disabled={page === 1 ? 'disabled' : ''}\n        className=\"pagination__button\" \n        onClick={() => changePage(page - 1)}\n      >\n        &laquo;\n      </button>\n      {pageButtons.map(value => (\n        <button\n          disabled={value === separate ? 'disabled' : ''}\n          className={getClassLink(value)}\n          key={randomstring.generate(5)}\n          onClick={() => changePage(value)}\n        >\n          {value}\n        </button>\n      ))}\n      <button\n        disabled={page === totalPages ? 'disabled' : ''}\n        className=\"pagination__button\" \n        onClick={() => changePage(page + 1)}\n      >\n        &raquo;\n      </button>\n    </div>\n  );\n};\n\nPagination.propTypes = {\n  page: PropTypes.number.isRequired,\n  totalPages: PropTypes.number.isRequired,\n  changePage: PropTypes.func.isRequired\n};\n\nexport default Pagination;","import React, { useState, useCallback } from 'react';\nimport debounce from 'lodash/debounce';\nimport PropTypes from 'prop-types';\n\nconst SearchPanel = ({ updateSearch }) => {\n  const [searchText, setSearchText] = useState('');\n\n  const updateSearchWithDebounce = useCallback(debounce(updateSearch, 1000), []);\n\n  const onUpdateSearch = ({ target }) => {\n    setSearchText(target.value);\n\n    updateSearchWithDebounce(searchText);\n  }\n\n  return (\n    <input\n      className=\"form-control\"\n      type=\"text\"\n      value={searchText}\n      placeholder=\"Search movies\"\n      onChange={onUpdateSearch}\n    />\n  );\n};\n\nSearchPanel.propTypes = {\n  updateSearch: PropTypes.func.isRequired\n};\n\nexport default SearchPanel;","import React from 'react';\nimport './nothing-search.scss';\n\nexport const NotFoundMovie = () => (\n  <div className=\"notFound-movie\">\n    <img src=\"https://avatars.mds.yandex.net/get-zen_doc/197997/pub_5ada0b7200b3ddc88a038800_5ada0c0148c85e73f0dcb9b7/scale_1200\" alt=\"no movie\" />\n    <p>Movie not found</p>\n  </div>\n);","import React from 'react';\nimport './error-message.scss';\n\nconst ErrorMessage = () => (\n  <div className=\"errorBlock\">\n    <img src=\"https://eksmo.ru/upload/iblock/c99/d_L_min.jpg\" alt=\"error\"></img>\n    <span className=\"errorText\">Something goes wrong, try again later.</span>\n  </div>\n)\n\nexport default ErrorMessage;","import React, { Component } from \"react\";\nimport MovieItem from './movie-item/movie-item';\nimport { API_URL, API_KEY_3 } from '../utils/api';\nimport { MovieTabs } from './movie-tabs/movie-tabs';\nimport { FavoriteMovies } from './favorite/favorite-movies';\nimport SortButton from './sort-button/sort-button';\nimport TopButton from './top-button/top-button';\nimport Loader from './loader/loader';\nimport Pagination from './pagination/pagination';\nimport SearchPanel from './search-panel/search-panel';\nimport { NotFoundMovie } from './nothing-search/nothing-search';\nimport ErrorMessage from '../components/error-message/error-message';\n\nimport './app.scss';\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      movies: [],\n      favoriteMovies: [],\n      sort_by: \"popularity.desc\",\n      isLoading: true,\n      isError: false,\n      page: 1,\n      totalPages: 0,\n      searchText: ''\n    };\n\n    this.myRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.getMoviesFromServer();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.sort_by !== this.state.sort_by ||\n    prevState.page !== this.state.page) {\n      this.getMoviesFromServer();\n    }\n  }\n\n  componentDidCatch() {\n    this.setState({\n      isError: true,\n    }); \n  }\n\n  getMoviesFromServer = () => {\n    fetch(\n      `${API_URL}/discover/movie?api_key=${API_KEY_3}&sort_by=${this.state.sort_by}&page=${this.state.page}`\n    )\n    .then(response => response.json())\n    .then(data => {\n      this.setState({\n        movies: data.results,\n        isLoading: false,\n        isError: false,\n        totalPages: data.total_pages,\n      });\n    })\n    .catch(() => {\n      this.setState({\n        isError: true,\n        isLoading: false,\n      });\n    })\n  }\n\n  changePage = value => {\n    if (value > 0 && value <= this.state.totalPages) {\n      this.setState({\n        page: value,\n        isLoading: true\n      });\n    }\n  };\n  \n  removeMovie = movie => {\n    const updateMovies = this.state.movies.filter(item => item.id !== movie.id);\n\n    this.setState({\n      movies: updateMovies\n    });\n  }\n\n  addToFavorite = movie => {\n    const updateFavoriteMovies = [...this.state.favoriteMovies, movie];\n\n    this.setState({\n      favoriteMovies: updateFavoriteMovies\n    });\n  }\n\n  removeFromFavorite = movie => {\n    const updateFavoriteMovies = this.state.favoriteMovies.filter(item => item.id !== movie.id);\n\n    this.setState({\n      favoriteMovies: updateFavoriteMovies\n    });\n  }\n\n  sortByRate = () => {\n    this.setState(prevState => ({\n      movies: [...prevState.movies].sort((a, b) => b.vote_average - a.vote_average),\n    }));\n  }\n\n  sortByReverseRate = () => {\n    this.setState(prevState => ({\n      movies: [...prevState.movies].sort((a, b) => a.vote_average - b.vote_average),\n    }));\n  }\n\n  updateSortBy = value => {\n    this.setState({\n      isLoading: true,\n      sort_by: value,\n      page: 1,\n    });\n  }\n\n  scrollTop = () => {\n    this.myRef.current.scrollIntoView({ behavior: 'smooth', block: 'start' });\n  }\n\n  searchMovie = (movies, searchText) => {\n    if (searchText.length < 2) {\n  \n      return movies;\n    }\n\n    return movies.filter(movie => movie.title\n      .toLowerCase()\n      .includes(searchText.toLowerCase().trim()));\n  }\n\n  updateSearch = (searchText) => {\n    this.setState({searchText});\n  }\n\n  render() {\n    const { movies, favoriteMovies, sort_by, page, totalPages, isLoading, isError, searchText } = this.state;\n    const visibleMovies = this.searchMovie(movies, searchText);\n    const errorMessage = isError && <ErrorMessage />;\n    const loading = isLoading && <Loader />;\n\n    return (\n      <div className=\"container\" ref={this.myRef}>\n        <div className=\"row mt-4 wrapper\">\n          <div className=\"col-9 content\">\n          <div className=\"mb-3\">\n            <SearchPanel \n              updateSearch={this.updateSearch} \n            />\n          </div>\n            <div className=\"row mb-4 navigation\">\n             <div className=\"col-9\">\n              <MovieTabs \n                sort_by={sort_by} \n                updateSortBy={this.updateSortBy} \n              />\n             </div>\n              <SortButton \n                sortByRate={this.sortByRate} \n                sortByReverseRate={this.sortByReverseRate} \n              />\n            </div>\n            <div className=\"row justify-content-center\">\n              <Pagination\n                page={page}\n                totalPages={totalPages}\n                changePage={this.changePage}\n              />\n            </div>\n            <div className=\"row card_container\">\n              {errorMessage || loading || (!visibleMovies.length && <NotFoundMovie />) ||\n                (\n                  visibleMovies.map(movie => (\n                    <div className=\"col-6 mb-4 card_wrapper\" key={movie.id}>\n                      <MovieItem\n                        movie={movie}\n                        removeMovie={this.removeMovie}\n                        addToFavorite={this.addToFavorite}\n                        removeFromFavorite={this.removeFromFavorite}\n                      />\n                    </div>\n                  ))\n                )\n              }\n            </div>\n          </div>\n          <FavoriteMovies favoriteMovies={favoriteMovies} />\n        </div>\n        <TopButton scrollTop={this.scrollTop} />\n      </div>\n    );\n  };\n};\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nReactDOM.render(\n  <App />, \n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t){},103:function(e,t){},137:function(e,t){},138:function(e,t){},182:function(e,t,a){},184:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(86),i=a.n(o),c=a(31),s=a(11),l=a(12),u=a(14),m=a(13),v=a(15),p=(a(92),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).trimOverview=function(e,t){return e.length>t?"".concat(e.slice(0,t).split(".").slice(0,-1).join("."),"."):e},a.getMovieImage=function(e){var t="https://image.tmdb.org/t/p/w500".concat(e.backdrop_path||e.poster_path);return e.backdrop_path||e.poster_path?t:"https://stockpictures.io/wp-content/uploads/2020/01/image-not-found-big-768x432.png"},a.handleClickRemove=function(e){return function(){a.setState({favorite:!1}),a.props.removeFromFavorite(e)}},a.handleClickAdd=function(e){return function(){a.setState({favorite:!0}),a.props.addToFavorite(e)}},a.state={favorite:!1},a}return Object(v.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.movie,a=e.removeMovie,n=this.state.favorite;return r.a.createElement("div",{className:"card"},r.a.createElement("img",{className:"card-img-top",src:this.getMovieImage(t),alt:"movie poster"}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h6",{className:"card-title"},t.title),r.a.createElement("p",{className:"card-rate mb-4"},"Rating: ",t.vote_average),r.a.createElement("p",{className:"card-overview"},this.trimOverview(t.overview,680)),r.a.createElement("div",{className:"card-buttons d-flex flex-column align-items-end"},n?r.a.createElement("button",{type:"button",className:"btn btn-secondary mb-2",onClick:this.handleClickRemove(t)},"Remove Favorite"):r.a.createElement("button",{type:"button",className:"btn btn-success mb-2",onClick:this.handleClickAdd(t)},"Add to Favorites"),r.a.createElement("button",{className:"btn btn-danger",onClick:a.bind(null,t)},"Delete movie"))))}}]),t}(r.a.Component)),d="https://api.themoviedb.org/3",f="3f4ca4f3a9750da53450646ced312397",h=a(30),b=a.n(h),g=(a(93),function(e){var t=e.sort_by,a=e.updateSortBy,n=function(e){return function(){return a(e)}},o=function(e){var a=t===e;return b()("nav-link",{active:a})};return r.a.createElement("ul",{className:"tabs nav nav-pills"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("div",{className:o("popularity.desc"),onClick:n("popularity.desc")},"Popularity")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("div",{className:o("revenue.desc"),onClick:n("revenue.desc")},"Revenue")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("div",{className:o("vote_average.desc"),onClick:n("vote_average.desc")},"Vote average")))}),y=(a(94),function(e){var t=e.favoriteMovies;return r.a.createElement("div",{className:"col-3 favorite"},r.a.createElement("h3",null,"Favorites: ",r.a.createElement("br",null)," ",t.length," movies"),r.a.createElement("ul",{className:"list-group"},t.map(function(e){return r.a.createElement("li",{className:"list-group-item",key:e.id},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",null,e.title),r.a.createElement("div",null,e.vote_average)))})))}),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={rateUp:!0},a}return Object(v.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.sortByRate,n=t.sortByReverseRate,o=this.state.rateUp;return r.a.createElement("div",{className:"col align-self-center text-right"},o?r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){e.setState({rateUp:!1}),a()}},"Highest rating"):r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){e.setState({rateUp:!0}),n()}},"Lowest rating"))}}]),t}(n.Component),N=function(){return r.a.createElement("div",{className:"loader spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))},_=(a(95),a(96)),k=function(e){var t=e.page,a=e.totalPages,n=e.changePage,o=function(e){var a=t===e;return b()("pagination__button",{"pagination__button--active":a})},i=function(e,t){return t<6?new Array(t).fill("").map(function(e,t){return t+1}):e<=5?[1,2,3,4,5,"...",t]:e>=5&&e<=t-5?[1,"...",e-1,e,e+1,"...",t]:[1,"...",t-4,t-3,t-2,t-1,t]}(t,a);return r.a.createElement("ul",{className:"pagination"},r.a.createElement("li",{className:"pagination__button",onClick:function(){return n(t-1)}},"\xab"),i.map(function(e){return r.a.createElement("li",{className:o(e),key:_.generate(5),onClick:function(){return n(e)}},e)}),r.a.createElement("li",{className:"pagination__button",onClick:function(){return n(t+1)}},"\xbb"))},S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).onUpdateSearch=function(e){var t=e.target.value;a.setState({searchText:t}),a.props.updateSearch(t)},a.state={searchText:""},a}return Object(v.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Search movies",onChange:this.onUpdateSearch})}}]),t}(n.Component),j=(a(182),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getMoviesFromServer=function(){fetch("".concat(d,"/discover/movie?api_key=").concat(f,"&sort_by=").concat(a.state.sort_by,"&page=").concat(a.state.page)).then(function(e){return e.json()}).then(function(e){a.setState({movies:e.results,isLoading:!0,totalPages:e.total_pages})}).catch(function(e){alert("Something wrong... ".concat(e)),console.log(e)})},a.changePage=function(e){e>0&&e<=a.state.totalPages&&a.setState({page:e})},a.removeMovie=function(e){var t=a.state.movies.filter(function(t){return t.id!==e.id});a.setState({movies:t})},a.addToFavorite=function(e){var t=[].concat(Object(c.a)(a.state.favoriteMovies),[e]);a.setState({favoriteMovies:t})},a.removeFromFavorite=function(e){var t=a.state.favoriteMovies.filter(function(t){return t.id!==e.id});a.setState({favoriteMovies:t})},a.sortByRate=function(){a.setState(function(e){return{movies:Object(c.a)(e.movies).sort(function(e,t){return t.vote_average-e.vote_average})}})},a.sortByReverseRate=function(){a.setState(function(e){return{movies:Object(c.a)(e.movies).sort(function(e,t){return e.vote_average-t.vote_average})}})},a.updateSortBy=function(e){a.setState({sort_by:e,page:1})},a.scrollTop=function(){a.myRef.current.scrollIntoView({behavior:"smooth",block:"start"})},a.searchMovie=function(e,t){return 0===t.length?e:e.filter(function(e){return e.title.toLowerCase().includes(t.toLowerCase().trim())})},a.updateSearch=function(e){a.setState({searchText:e})},a.state={movies:[],favoriteMovies:[],sort_by:"popularity.desc",isLoading:!1,page:1,totalPages:0,searchText:""},a.myRef=r.a.createRef(),a}return Object(v.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getMoviesFromServer()}},{key:"componentDidUpdate",value:function(e,t){t.sort_by===this.state.sort_by&&t.page===this.state.page||this.getMoviesFromServer()}},{key:"render",value:function(){var e=this,t=this.state,a=t.movies,n=t.favoriteMovies,o=t.sort_by,i=t.page,c=t.totalPages,s=t.isLoading,l=t.searchText,u=this.searchMovie(a,l);return r.a.createElement("div",{className:"container",ref:this.myRef},r.a.createElement("div",{className:"row mt-4 wrapper"},r.a.createElement("div",{className:"col-9 content"},r.a.createElement("div",{className:"mb-3"},r.a.createElement(S,{updateSearch:this.updateSearch})),r.a.createElement("div",{className:"row mb-4 navigation"},r.a.createElement("div",{className:"col-9"},r.a.createElement(g,{sort_by:o,updateSortBy:this.updateSortBy})),r.a.createElement(E,{sortByRate:this.sortByRate,sortByReverseRate:this.sortByReverseRate})),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(k,{page:i,totalPages:c,changePage:this.changePage})),r.a.createElement("div",{className:"row card_container"},s?u.map(function(t){return r.a.createElement("div",{className:"col-6 mb-4 card_wrapper",key:t.id},r.a.createElement(p,{movie:t,removeMovie:e.removeMovie,addToFavorite:e.addToFavorite,removeFromFavorite:e.removeFromFavorite}))}):r.a.createElement(N,null))),r.a.createElement(y,{favoriteMovies:n})),r.a.createElement("button",{type:"button",className:"button__top",onClick:this.scrollTop,title:"Go to top"},"Top"))}}]),t}(r.a.Component));a(183);i.a.render(r.a.createElement(j,null),document.getElementById("root"))},87:function(e,t,a){e.exports=a(184)},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.8631d1a1.chunk.js.map
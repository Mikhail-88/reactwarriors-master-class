(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t){},103:function(e,t){},137:function(e,t){},138:function(e,t){},182:function(e,t,a){},184:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(86),i=a.n(r),c=a(31),s=a(14),l=a(15),m=a(17),u=a(16),v=a(18),f=(a(92),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).trimOverview=function(e,t){return e.length>t?"".concat(e.slice(0,t).split(".").slice(0,-1).join("."),"."):e},a.state={favorite:!1},a}return Object(v.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.movie,n=t.removeMovie,r=t.addToFavorite,i=t.removeFromFavorite,c="https://image.tmdb.org/t/p/w500".concat(a.backdrop_path||a.poster_path),s=a.backdrop_path||a.poster_path;return o.a.createElement("div",{className:"card"},o.a.createElement("img",{className:"card-img-top",src:s?c:"https://stockpictures.io/wp-content/uploads/2020/01/image-not-found-big-768x432.png",alt:""}),o.a.createElement("div",{className:"card-body"},o.a.createElement("h6",{className:"card-title"},a.title),o.a.createElement("p",{className:"card-rate mb-4"},"Rating: ",a.vote_average),o.a.createElement("p",{className:"card-overview"},this.trimOverview(a.overview,680)),o.a.createElement("div",{className:"card-buttons d-flex flex-column align-items-end"},this.state.favorite?o.a.createElement("button",{type:"button",className:"btn btn-secondary mb-2",onClick:function(){e.setState({favorite:!1}),i(a)}},"Remove Favorite"):o.a.createElement("button",{type:"button",className:"btn btn-success mb-2",onClick:function(){e.setState({favorite:!0}),r(a)}},"Add to Favorites"),o.a.createElement("button",{className:"btn btn-danger",onClick:n.bind(null,a)},"Delete movie"))))}}]),t}(o.a.Component)),p="https://api.themoviedb.org/3",d="3f4ca4f3a9750da53450646ced312397",b=a(30),g=a.n(b),h=(a(93),function(e){var t=e.sort_by,a=e.updateSortBy,n=function(e){return function(){return a(e)}},r=function(e){var a=t===e;return g()("nav-link",{active:a})};return o.a.createElement("ul",{className:"tabs nav nav-pills"},o.a.createElement("li",{className:"nav-item"},o.a.createElement("div",{className:r("popularity.desc"),onClick:n("popularity.desc")},"Popularity")),o.a.createElement("li",{className:"nav-item"},o.a.createElement("div",{className:r("revenue.desc"),onClick:n("revenue.desc")},"Revenue")),o.a.createElement("li",{className:"nav-item"},o.a.createElement("div",{className:r("vote_average.desc"),onClick:n("vote_average.desc")},"Vote average")))}),y=(a(94),function(e){var t=e.favoriteMovies;return o.a.createElement("div",{className:"col-3 favorite"},o.a.createElement("h3",null,"Favorites: ",o.a.createElement("br",null)," ",t.length," movies"),o.a.createElement("ul",{className:"list-group"},t.map(function(e){return o.a.createElement("li",{className:"list-group-item",key:e.id},o.a.createElement("div",{className:"d-flex justify-content-between"},o.a.createElement("div",null,e.title),o.a.createElement("div",null,e.vote_average)))})))}),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={rateUp:!0},a}return Object(v.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.sortByRate,n=t.sortByReverseRate;return o.a.createElement("div",{className:"col align-self-center text-right"},this.state.rateUp?o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){e.setState({rateUp:!1}),a()}},"Highest rating"):o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){e.setState({rateUp:!0}),n()}},"Lowest rating"))}}]),t}(o.a.Component),N=function(){return o.a.createElement("div",{className:"loader spinner-border text-primary",role:"status"},o.a.createElement("span",{className:"sr-only"},"Loading..."))},_=(a(95),a(96)),k=function(e){var t,a=e.page,n=e.totalPages,r=e.changePage,i=function(e){var t=a===e;return g()("pagination__button",{"pagination__button--active":t})},c=(t=a,n<6?new Array(n).fill("").map(function(e,t){return t+1}):t<4?[1,2,3,4,5,"...",n]:t>=4&&t<n-4?[1,"...",t-1,t,t+1,"...",n]:[1,"...",n-4,n-3,n-2,n-1,n]);return o.a.createElement("ul",{className:"pagination"},o.a.createElement("li",{className:"pagination__button",onClick:function(){return r(a-1)}},"\xab"),c.map(function(e){return o.a.createElement("li",{className:i(e),key:_.generate(5),onClick:function(){return r(e)}},e)}),o.a.createElement("li",{className:"pagination__button",onClick:function(){return r(a+1)}},"\xbb"))},j=(a(182),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).getMoviesFromServer=function(){fetch("".concat(p,"/discover/movie?api_key=").concat(d,"&sort_by=").concat(a.state.sort_by,"&page=").concat(a.state.page)).then(function(e){return e.json()}).then(function(e){a.setState({movies:e.results,isLoading:!0,totalPages:e.total_pages})}).catch(function(e){alert("Something wrong... ".concat(e)),console.log(e)})},a.changePage=function(e){e>0&&e<=a.state.totalPages&&a.setState({page:e})},a.removeMovie=function(e){var t=a.state.movies.filter(function(t){return t.id!==e.id});a.setState({movies:t})},a.addToFavorite=function(e){var t=[].concat(Object(c.a)(a.state.favoriteMovies),[e]);a.setState({favoriteMovies:t})},a.removeFromFavorite=function(e){var t=a.state.favoriteMovies.filter(function(t){return t.id!==e.id});a.setState({favoriteMovies:t})},a.sortByRate=function(){a.setState(function(e){return{movies:Object(c.a)(e.movies).sort(function(e,t){return t.vote_average-e.vote_average})}})},a.sortByReverseRate=function(){a.setState(function(e){return{movies:Object(c.a)(e.movies).sort(function(e,t){return e.vote_average-t.vote_average})}})},a.updateSortBy=function(e){a.setState({sort_by:e,page:1})},a.scrollTop=function(){a.myRef.current.scrollIntoView({behavior:"smooth",block:"start"})},a.state={movies:[],favoriteMovies:[],sort_by:"popularity.desc",isLoading:!1,page:1,totalPages:0},a.myRef=o.a.createRef(),a}return Object(v.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getMoviesFromServer()}},{key:"componentDidUpdate",value:function(e,t){t.sort_by===this.state.sort_by&&t.page===this.state.page||this.getMoviesFromServer()}},{key:"render",value:function(){var e=this,t=this.state,a=t.movies,n=t.favoriteMovies,r=t.sort_by,i=t.page,c=t.totalPages,s=t.isLoading;return o.a.createElement("div",{className:"container",ref:this.myRef},o.a.createElement("div",{className:"row mt-4"},o.a.createElement("div",{className:"col-9"},o.a.createElement("div",{className:"row mb-4"},o.a.createElement("div",{className:"col-9"},o.a.createElement(h,{sort_by:r,updateSortBy:this.updateSortBy})),o.a.createElement(E,{sortByRate:this.sortByRate,sortByReverseRate:this.sortByReverseRate})),o.a.createElement("div",{className:"row justify-content-center"},o.a.createElement(k,{page:i,totalPages:c,changePage:this.changePage})),o.a.createElement("div",{className:"row"},s?a.map(function(t){return o.a.createElement("div",{className:"col-6 mb-4",key:t.id},o.a.createElement(f,{movie:t,removeMovie:e.removeMovie,addToFavorite:e.addToFavorite,removeFromFavorite:e.removeFromFavorite}))}):o.a.createElement(N,null))),o.a.createElement(y,{favoriteMovies:n})),o.a.createElement("button",{type:"button",className:"button__top",onClick:this.scrollTop,title:"Go to top"},"Top"))}}]),t}(o.a.Component));a(183);i.a.render(o.a.createElement(j,null),document.getElementById("root"))},87:function(e,t,a){e.exports=a(184)},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.ab431583.chunk.js.map